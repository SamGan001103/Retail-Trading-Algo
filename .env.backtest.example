# Backtest mode focused template.

# Optional: Databento Historical API key for scripts/data/download_databento_batch_csv.py
# DATABENTO_API_KEY=...

BACKTEST_DATA_CSV=data/mnq_orderflow.csv
# Example Databento conversion output:
# BACKTEST_DATA_CSV=data/mnq_databento_orderflow.csv
BACKTEST_INITIAL_CASH=10000
BACKTEST_FEE_PER_ORDER=1.0
BACKTEST_SLIPPAGE_BPS=1.0
BACKTEST_SLIP_ENTRY_TICKS=0.0
BACKTEST_SLIP_STOP_TICKS=0.0
BACKTEST_SLIP_TP_TICKS=0.0
BACKTEST_SPREAD_SLIP_K=1.0
BACKTEST_ENTRY_DELAY_EVENTS=1
BACKTEST_CANDIDATE_MONTHS=6
BACKTEST_WALK_FORWARD=false
BACKTEST_WF_WINDOW_MONTHS=6
BACKTEST_WF_STEP_MONTHS=1
# BACKTEST_WF_START_UTC=2025-01-01T00:00:00Z
# BACKTEST_WF_END_UTC=2026-01-01T00:00:00Z
BACKTEST_CANDIDATES_CSV=artifacts/telemetry/backtest_candidates.csv
BACKTEST_MATRIX_CSV=artifacts/telemetry/backtest_candidate_matrix.csv
BACKTEST_SUMMARY_CSV=artifacts/telemetry/backtest_summary.csv
BACKTEST_BAR_SEC=60
BACKTEST_SHADOW_ML_ENABLED=false
BACKTEST_SHADOW_ML_MODEL_PATH=artifacts/models/xgboost_model.json
BACKTEST_SHADOW_ML_MIN_PROBA=0.55
BACKTEST_PREFLIGHT_STRICT=true
BACKTEST_PREFLIGHT_REQUIRE_SEQ=true
BACKTEST_PREFLIGHT_MIN_ROWS=1
BACKTEST_PREFLIGHT_MIN_QUOTE_COVERAGE=0.90
BACKTEST_PREFLIGHT_MIN_DEPTH_COVERAGE=0.90
BACKTEST_PREFLIGHT_MIN_SESSION_ROWS=1
BACKTEST_SENSITIVITY_SWEEP=false
BACKTEST_SWEEP_ENTRY_DELAYS=0,1,2
BACKTEST_SWEEP_SLIP_ENTRY_TICKS=0,0.5,1.0
BACKTEST_SWEEP_SPREAD_SLIP_K=0,1,2
BACKTEST_NEWS_CSV=data/news_usd_major.csv
BACKTEST_NEWS_PRE_MIN=15
BACKTEST_NEWS_POST_MIN=15
BACKTEST_NEWS_MAJOR_ONLY=true
BACKTEST_NEWS_CURRENCIES=USD

SYMBOL=MNQ
SIZE=1

# For ny_structure backtests, runtime enforces tick sniper entry with require_orderflow=true.
# Provide orderflow-capable CSV rows (timestamp + price + depth), e.g.
# bestBidSize/bestAskSize or depth_bids/depth_asks.
STRAT_AVOID_NEWS=true
STRAT_NEWS_EXIT_ON_EVENT=false
STRAT_HTF_AGGREGATION=15
STRAT_BIAS_AGGREGATION=60
RUNTIME_PROFILE=normal
TELEMETRY_DIR=artifacts/telemetry
TELEMETRY_CANDIDATES_FILE=candidate_trades.jsonl
TELEMETRY_PERF_FILE=performance.jsonl

STRAT_ACCOUNT_MAX_DRAWDOWN=2000
ACCOUNT_MAX_DRAWDOWN_KILLSWITCH=2000
ACCOUNT_MAX_DRAWDOWN=2000
STRAT_MAX_TRADE_DRAWDOWN_FRACTION=0.15
STRAT_MIN_RRR=3.0
STRAT_MAX_RRR=10.0
STRAT_SL_NOISE_BUFFER_TICKS=2
STRAT_SL_MAX_TICKS=200
STRAT_TP_FRONT_RUN_TICKS=2
STRAT_ENABLE_EXHAUSTION_MARKET_EXIT=true
