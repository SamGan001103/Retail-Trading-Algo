# Copy this file to `.env` and fill values.
# Do not commit real credentials.

# -------------------------
# Broker / account
# -------------------------
BROKER=projectx
BROKER_BASE_URL=https://api.topstepx.com
BROKER_USERNAME=YOUR_USERNAME
BROKER_API_KEY=YOUR_API_KEY
ACCOUNT_ID=12345678
BROKER_USER_HUB_URL=https://rtc.topstepx.com/hubs/user
BROKER_MARKET_HUB_URL=https://rtc.topstepx.com/hubs/market

# -------------------------
# Runtime safety
# -------------------------
BOT_ENABLED=0
TRADING_ENVIRONMENT=DEMO
LIVE=false
FLATTEN_ON_START=false
TRADE_ON_START=false
EXIT_GRACE_SEC=5

# -------------------------
# Execution defaults
# -------------------------
SYMBOL=MNQ
SIDE=0
SIZE=1
SL_TICKS=40
TP_TICKS=80
LOOP_SEC=1

# -------------------------
# Strategy selection defaults
# -------------------------
STRAT_ENTRY_MODE=tick
STRAT_REQUIRE_ORDERFLOW=false
STRAT_FORWARD_BAR_SEC=1
STRAT_TICK_POLL_IDLE_SEC=0.25
STRAT_TICK_POLL_ARMED_SEC=0.05
SUB_DEPTH=true

# -------------------------
# NY session structure parameters
# -------------------------
STRAT_NY_SESSION_START=09:30
STRAT_NY_SESSION_END=16:00
STRAT_TZ_NAME=America/New_York
STRAT_HTF_AGGREGATION=5
STRAT_HTF_SWING_HIGH=5
STRAT_HTF_SWING_LOW=5
STRAT_LTF_SWING_HIGH=3
STRAT_LTF_SWING_LOW=3
STRAT_SWEEP_WICK_MIN=0.5
STRAT_SWEEP_EXPIRY_BARS=40
STRAT_EQUAL_LEVEL_TOL_BPS=8
STRAT_KEY_AREA_TOL_BPS=12
STRAT_MIN_CONFLUENCE=1
STRAT_TICK_SETUP_EXPIRY_BARS=3
STRAT_TICK_HISTORY_SIZE=120
STRAT_TICK_MIN_IMBALANCE=0.12
STRAT_TICK_MIN_TRADE_SIZE=1.0
STRAT_TICK_SPOOF_COLLAPSE=0.35
STRAT_TICK_ABSORPTION_TRADES=2
STRAT_TICK_ICEBERG_RELOADS=2

# -------------------------
# ML gate
# -------------------------
STRAT_ML_GATE_ENABLED=false
STRAT_ML_MODEL_PATH=artifacts/models/xgboost_model.json
STRAT_ML_MIN_PROBA=0.55
STRAT_ML_FAIL_OPEN=false

# -------------------------
# Position management (SL/TP/sizing)
# -------------------------
# Split drawdown controls:
# - STRAT_ACCOUNT_MAX_DRAWDOWN: per-trade sizing budget anchor.
# - ACCOUNT_MAX_DRAWDOWN_KILLSWITCH: runtime/backtest stop-trading threshold.
STRAT_ACCOUNT_MAX_DRAWDOWN=2000
ACCOUNT_MAX_DRAWDOWN_KILLSWITCH=2000

# Backward-compat fallback (used only if split vars above are missing).
ACCOUNT_MAX_DRAWDOWN=2000

STRAT_MAX_TRADE_DRAWDOWN_FRACTION=0.15
STRAT_MIN_RRR=3.0
STRAT_MAX_RRR=10.0
STRAT_SL_NOISE_BUFFER_TICKS=2
STRAT_SL_MAX_TICKS=200
STRAT_TP_FRONT_RUN_TICKS=2
STRAT_ML_MIN_SIZE_FRACTION=0.35
STRAT_ML_SIZE_FLOOR_SCORE=0.55
STRAT_ML_SIZE_CEILING_SCORE=0.90
STRAT_ENABLE_EXHAUSTION_MARKET_EXIT=true
STRAT_DRAWDOWN_GUARD_ENABLED=true
STRAT_MAX_OPEN_POSITIONS=1
STRAT_MAX_OPEN_ORDERS_WHILE_FLAT=0

# Optional symbol-specific overrides.
# If omitted, defaults come from SYMBOL profile in code (MNQ/NQ/MES/ES/MGC/GC).
# STRAT_TICK_SIZE=0.25
# STRAT_TICK_VALUE=0.5
# STRAT_DOM_LIQUIDITY_WALL_SIZE=800

# -------------------------
# Optional backtest/train defaults
# -------------------------
BACKTEST_DATA_CSV=data/ohlcv.csv
BACKTEST_INITIAL_CASH=10000
BACKTEST_FEE_PER_ORDER=1.0
BACKTEST_SLIPPAGE_BPS=1.0

# -------------------------
# Diagnostics
# -------------------------
DEBUG_HTTP=false
DEBUG_RTC=true
